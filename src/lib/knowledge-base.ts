/**
 * Al Hanan Education Centre Knowledge Base
 * This is the single source of truth for all school information.
 * The AI assistant ONLY uses this data to answer questions.
 */

export const alHananKnowledgeBase = {
  school: {
    name: "Al Hanan Education Centre",
    tagline: "Shaping Minds, Nurturing Faith, Building the Future",
    description: "A premium Muslim school dedicated to academic excellence and Qur'anic mastery in an Islamic environment.",
    foundedYear: 2019,
    founder: "Ummul Qura Cultural and Development Foundation",
    location: {
      address: "Bulubandi, Nakigo, Iganga District, Uganda",
      road: "Bulubandi–Kiboyo Road",
      coordinates: "0°35'21.4\"N 33°30'03.6\"E",
      country: "Uganda",
      region: "East Africa"
    },
    registration: {
      status: "Fully Registered with the Ministry of Education and Sports, Uganda",
      recognitionYear: "2019",
      approvalStatus: "Approved and recognized educational institution"
    },
    contact: {
      phone: ["0745 726 350"],
      email: "info@alhanan.ug",
      hours: "School Hours: 8:00 AM - 3:30 PM (Monday-Friday)"
    },
    vision: "To be a leading African Muslim school producing well-rounded, disciplined, excellent learners who are rooted in Islamic faith and academic excellence.",
    mission: "To provide comprehensive Islamic education combined with rigorous academics, shaping learners into leaders of character, faith, and intellectual excellence."
  },

  programs: {
    quranMemorization: {
      name: "Qur'an Memorization (Hifdh)",
      description: "Students memorize and master the entire Holy Qur'an with guidance from expert Qur'anic teachers.",
      targetAudience: "All primary learners at Al Hanan",
      keyFeatures: [
        "Structured Memorization Curriculum aligned with national standards",
        "Daily Qur'an study and revision sessions",
        "Expert Qur'anic teachers with proven track record",
        "Individual pace while maintaining high standards",
        "Hifdh completion by Primary Seven graduation",
        "Tajweed (proper recitation) mastery"
      ],
      benefits: [
        "Complete Qur'anic memorization by graduation",
        "Strong Islamic foundation",
        "Spiritual development alongside academics",
        "Leadership and character formation"
      ],
      highlight: "Al Hanan learners complete full Hifdh while maintaining excellent academic performance."
    },

    islamicStudies: {
      name: "Islamic Studies",
      description: "Deep theological knowledge and Islamic principles integrated into daily learning.",
      targetAudience: "All learners at Al Hanan",
      keyFeatures: [
        "Islamic theology and jurisprudence",
        "Qur'anic interpretation (Tafsir) basics",
        "Islamic history and civilization",
        "Character and values development through Islamic principles",
        "Islamic ethics and leadership",
        "Integration of Islamic values in all subjects"
      ],
      benefits: [
        "Strong Islamic faith and conviction",
        "Character formation based on Islamic values",
        "Understanding of Islamic civilization and contributions",
        "Leadership grounded in Islamic principles"
      ]
    },

    primaryEducation: {
      name: "Primary Education Excellence",
      description: "Full national curriculum delivered with academic rigor, ensuring outstanding performance.",
      targetAudience: "Primary learners (Classes 1-7)",
      keyFeatures: [
        "English language mastery and fluency",
        "Arabic language strong proficiency",
        "Mathematics and Science excellence",
        "Social studies with Islamic perspective",
        "Physical education and sports",
        "Creative and performing arts",
        "Digital literacy and technology skills"
      ],
      languages: {
        english: "Mother tongue of instruction, comprehensive English curriculum",
        arabic: "Strong fluency in Arabic language and Islamic terminology"
      },
      benefits: [
        "Outstanding academic performance",
        "Multilingual capability (English and Arabic)",
        "Holistic development of learners",
        "Critical thinking and problem-solving skills",
        "Preparation for secondary education excellence"
      ]
    }
  },

  whyAlHanan: {
    points: [
      {
        title: "Qur'an First Approach",
        description: "Qur'anic memorization is central to the curriculum. Learners complete Hifdh by Primary Seven while excelling academically."
      },
      {
        title: "Academic Excellence",
        description: "Shaped by some of the most proficient teachers in the country. Performance is excellent not only on paper, but in real life and character."
      },
      {
        title: "Experienced Teaching Staff",
        description: "Highly qualified educators with proven track records in both Islamic and secular education."
      },
      {
        title: "Disciplined Islamic Environment",
        description: "Strong Islamic values, discipline, and ethics permeate all aspects of school life."
      },
      {
        title: "Holistic Development",
        description: "Al Hanan learners are different from ordinary learners. Discipline, excellence, faith, and leadership are core to our approach."
      },
      {
        title: "Modern Facilities & Approach",
        description: "Futuristic school design with modern learning tools while maintaining traditional Islamic values."
      }
    ]
  },

  admissions: {
    openPositions: "Classes 1-7 (Primary Education)",
    applicationProcess: [
      "Submit admission application form",
      "Child assessment in English and Mathematics",
      "Parent-child interview",
      "Review of previous academic records (if applicable)",
      "Final admission decision"
    ],
    requirements: [
      "Birth certificate or national ID",
      "Previous school records (if applicable)",
      "Proof of residence",
      "Health clearance"
    ],
    contactAdmissions: "0745 726 350 or info@alhanan.ug",
    enrollmentDeadline: "Rolling admissions; early application recommended",
    scholarships: "Merit-based scholarships available for exceptional learners. Contact admissions office for details."
  },

  schoolLife: {
    daysOfOperation: "Monday - Friday",
    schoolHours: "8:00 AM - 3:30 PM",
    environment: "Faith-centered, disciplined, academically rigorous, and nurturing",
    values: [
      "Integrity and honesty",
      "Excellence in all endeavors",
      "Respect and discipline",
      "Islamic faith and practice",
      "Community and cooperation",
      "Continuous improvement"
    ],
    activities: [
      "Daily Qur'an memorization sessions",
      "Islamic studies classes",
      "Academic classes",
      "Sports and physical activities",
      "Arts and creative activities",
      "Community service projects",
      "School events and celebrations"
    ]
  },

  faqs: [
    {
      question: "What is Al Hanan Education Centre?",
      answer: "Al Hanan is a premium Muslim school founded in 2019, registered with the Ministry of Education and Sports in Uganda. We combine rigorous academics with comprehensive Qur'anic memorization, shaping disciplined leaders with unshakeable Islamic faith."
    },
    {
      question: "Where is Al Hanan located?",
      answer: "Al Hanan Education Centre is located along Bulubandi–Kiboyo Road in Bulubandi, Nakigo, Iganga District, Uganda. Our coordinates are 0°35'21.4\"N 33°30'03.6\"E."
    },
    {
      question: "Is the school registered?",
      answer: "Yes, Al Hanan is fully registered and recognized by the Ministry of Education and Sports, Uganda. We are an approved educational institution meeting all national standards."
    },
    {
      question: "What curriculum does Al Hanan follow?",
      answer: "Al Hanan follows the national Primary Education curriculum while integrating comprehensive Qur'anic memorization and Islamic studies. English is the mother tongue of instruction, and Arabic proficiency is developed throughout."
    },
    {
      question: "Do learners memorize the entire Qur'an?",
      answer: "Yes, Qur'an memorization (Hifdh) is a core part of the Al Hanan program. Learners complete the full Qur'an memorization by Primary Seven graduation while maintaining excellent academic performance."
    },
    {
      question: "What languages are taught at Al Hanan?",
      answer: "English is the main language of instruction, and learners develop strong Arabic fluency. Both languages are essential to our Islamic and academic curriculum."
    },
    {
      question: "What makes Al Hanan different from other schools?",
      answer: "Al Hanan learners are different from ordinary learners. We combine Islamic faith, academic excellence, and character development. Our unique Hifdh-while-excelling-academically approach is rare and highly effective."
    },
    {
      question: "How can I apply to Al Hanan?",
      answer: "Please contact our admissions office at 0745 726 350 or email info@alhanan.ug. We require assessment in English and Mathematics, birth certificate, and health clearance."
    },
    {
      question: "What are the school hours?",
      answer: "Al Hanan operates from 8:00 AM to 3:30 PM, Monday through Friday. This schedule allows for comprehensive academics and Qur'anic memorization."
    },
    {
      question: "How can I visit the school?",
      answer: "We welcome visits from parents and prospective families. Please contact us at 0745 726 350 to schedule a visit. We're located at Bulubandi, Nakigo, Iganga along the Bulubandi–Kiboyo Road."
    }
  ]
};

/**
 * Extract relevant knowledge sections based on user query
 */
export function extractRelevantKnowledge(userQuery: string): string {
  const queryLower = userQuery.toLowerCase();
  const relevantSections: string[] = [];

  // Location queries
  if (queryLower.includes("location") || queryLower.includes("where") || queryLower.includes("address") || queryLower.includes("coordinates")) {
    relevantSections.push(
      `Location Information: ${JSON.stringify(alHananKnowledgeBase.school.location, null, 2)}`
    );
  }

  // Qur'an queries
  if (queryLower.includes("quran") || queryLower.includes("memoriz") || queryLower.includes("hifdh")) {
    relevantSections.push(
      `Qur'an Memorization Program: ${JSON.stringify(alHananKnowledgeBase.programs.quranMemorization, null, 2)}`
    );
  }

  // Islamic studies queries
  if (queryLower.includes("islamic") || queryLower.includes("theology") || queryLower.includes("faith")) {
    relevantSections.push(
      `Islamic Studies Program: ${JSON.stringify(alHananKnowledgeBase.programs.islamicStudies, null, 2)}`
    );
  }

  // Academic/Primary education queries
  if (queryLower.includes("academic") || queryLower.includes("education") || queryLower.includes("curriculum")) {
    relevantSections.push(
      `Primary Education Program: ${JSON.stringify(alHananKnowledgeBase.programs.primaryEducation, null, 2)}`
    );
  }

  // Admissions queries
  if (queryLower.includes("admission") || queryLower.includes("apply") || queryLower.includes("enrollment")) {
    relevantSections.push(
      `Admissions Information: ${JSON.stringify(alHananKnowledgeBase.admissions, null, 2)}`
    );
  }

  // Contact queries
  if (queryLower.includes("contact") || queryLower.includes("phone") || queryLower.includes("email")) {
    relevantSections.push(
      `Contact Information: ${JSON.stringify(alHananKnowledgeBase.school.contact, null, 2)}`
    );
  }

  // About/Founder queries
  if (queryLower.includes("founded") || queryLower.includes("founder") || queryLower.includes("who is") || queryLower.includes("established")) {
    relevantSections.push(
      `Founder Information: Founded in 2019 by Ummul Qura Cultural and Development Foundation. Al Hanan is a registered school dedicated to academic excellence and Qur'anic mastery.`
    );
  }

  // Registration/Ministry queries
  if (queryLower.includes("registered") || queryLower.includes("approved") || queryLower.includes("ministry")) {
    relevantSections.push(
      `Registration Status: ${JSON.stringify(alHananKnowledgeBase.school.registration, null, 2)}`
    );
  }

  // Why Al Hanan queries
  if (queryLower.includes("why") || queryLower.includes("difference") || queryLower.includes("unique")) {
    relevantSections.push(
      `Why Al Hanan: ${JSON.stringify(alHananKnowledgeBase.whyAlHanan, null, 2)}`
    );
  }

  // School life queries
  if (queryLower.includes("school life") || queryLower.includes("environment") || queryLower.includes("hours")) {
    relevantSections.push(
      `School Life: ${JSON.stringify(alHananKnowledgeBase.schoolLife, null, 2)}`
    );
  }

  // Always include school overview for context
  if (relevantSections.length === 0) {
    relevantSections.push(
      `School Overview: ${JSON.stringify(alHananKnowledgeBase.school, null, 2)}`
    );
  }

  return relevantSections.join("\n\n---\n\n");
}

/**
 * Sanitize user input to prevent injection attacks
 */
export function sanitizeInput(input: string): string {
  return input
    .trim()
    .substring(0, 2000)
    .replace(/[<>]/g, "");
}
